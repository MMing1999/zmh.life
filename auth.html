<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GitHub 认证</title>
</head>
<body>
  <script>
    // Decap CMS GitHub OAuth 处理
    window.addEventListener('load', function() {
      // 获取 URL 参数
      const urlParams = new URLSearchParams(window.location.search);
      const provider = urlParams.get('provider');
      const siteId = urlParams.get('site_id');
      const scope = urlParams.get('scope');
      
      if (provider === 'github') {
        // 构建 GitHub OAuth URL
        const clientId = 'Ov23liFESFb3Ul9cWPCj';
        const redirectUri = encodeURIComponent(window.location.origin + '/admin/');
        const githubScope = encodeURIComponent(scope || 'repo');
        const state = encodeURIComponent(siteId || 'zmh.life');
        
        const githubAuthUrl = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${githubScope}&state=${state}`;
        
        // 重定向到 GitHub
        window.location.href = githubAuthUrl;
      } else {
        // 重定向到 admin
        window.location.href = '/admin/#/';
      }
    });
  </script>
  <div style="text-align: center; margin-top: 50px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
    <h2>🔄 GitHub 认证中...</h2>
    <p>正在跳转到 GitHub 登录页面...</p>
  </div>
</body>
</html>