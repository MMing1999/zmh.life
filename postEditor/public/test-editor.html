<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toast UI Editor 测试</title>
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
</head>
<body>
    <h1>Toast UI Editor 测试</h1>
    <div id="editor" style="height: 500px; border: 1px solid #ddd;"></div>
    
    <div id="debug" style="margin-top: 20px; padding: 10px; background: #f0f0f0;">
        <div>Toast UI 状态: <span id="toastui-status">检查中...</span></div>
        <div>编辑器状态: <span id="editor-status">等待中...</span></div>
    </div>

    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toastuiStatus = document.getElementById('toastui-status');
            const editorStatus = document.getElementById('editor-status');
            
            // 检查Toast UI是否加载
            if (typeof toastui === 'undefined') {
                toastuiStatus.textContent = '未加载';
                editorStatus.textContent = 'Toast UI 未加载';
                return;
            }
            
            toastuiStatus.textContent = '已加载';
            editorStatus.textContent = '正在初始化...';
            
            // 检查可用的API
            console.log('toastui object:', toastui);
            console.log('toastui.Editor:', toastui.Editor);
            console.log('typeof toastui.Editor:', typeof toastui.Editor);
            
            try {
                // 尝试不同的API调用方式
                let Editor;
                if (typeof toastui.Editor === 'function') {
                    Editor = toastui.Editor;
                } else if (toastui.Editor && typeof toastui.Editor.default === 'function') {
                    Editor = toastui.Editor.default;
                } else {
                    throw new Error('无法找到 Editor 构造函数');
                }
                
                const editor = new Editor({
                    el: document.querySelector('#editor'),
                    height: '500px',
                    initialEditType: 'markdown',
                    previewStyle: 'vertical',
                    initialValue: '# 测试编辑器\n\n这是一个测试。'
                });
                
                editorStatus.textContent = '初始化成功';
                console.log('编辑器初始化成功');
                
            } catch (error) {
                editorStatus.textContent = '初始化失败: ' + error.message;
                console.error('初始化失败:', error);
            }
        });
    </script>
</body>
</html>
