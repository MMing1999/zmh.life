---
layout: layouts/base.njk
title: "çŸ¥ Â· Knowing"
description: "çŸ¥è¯†åˆ†äº«ä¸å­¦ä¹ è®°å½•ã€‚è¿™é‡Œæ˜¯æˆ‘å­¦ä¹ ã€æ€è€ƒã€è®°å½•çš„åœ°æ–¹ã€‚é€šè¿‡è§‚å¯Ÿã€æ”¶é›†ã€é˜…è¯»ã€å†™ä½œå››ä¸ªç»´åº¦ï¼Œæ„å»ºä¸ªäººçš„çŸ¥è¯†ä½“ç³»ï¼Œåˆ†äº«æœ‰ä»·å€¼çš„å†…å®¹å’Œè§è§£ã€‚"
section: "zhi"
pageName: "zhi"
pageCSS: "/assets/Css/zhi.css"
---

<!-- Main Content Section -->
<section class="main-content">
  <div class="content-container">
    
    <!-- Title -->
    <h1 class="page-title">çŸ¥ Â· Knowing</h1>
    
    <!-- Description -->
    <p class="page-description">
      çŸ¥è¯†åˆ†äº«ä¸å­¦ä¹ ï¼Œè®°å½•è¿™æ˜¯æˆ‘å­¦ä¹ ã€æ€è€ƒã€è®°å½•çš„åœ°æ–¹ã€‚é€šè¿‡è§‚å¯Ÿã€æ”¶é›†ã€é˜…è¯»ã€å†™ä½œå››ä¸ªç»´åº¦ï¼Œ
      æ„å»ºä¸ªäººçš„çŸ¥è¯†ä½“ç³»ï¼Œåˆ†äº«æœ‰ä»·å€¼çš„å†…å®¹å’Œè§è§£ã€‚
    </p>
    
    <!-- Four Buttons -->
    <div class="buttons-container">
      <a href="/zhi/collection/" class="nav-button" data-tooltip="æ”¶é›†" data-messages='["æŠ“ä½è„‘æµ·é‡Œä¸€é—ªè€Œè¿‡çš„å¿µå¤´ã€‚", "æ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸã€‚", "æ··æ²Œçš„å¿µå’Œç§©åºçš„æˆ‘ã€‚"]'>æ”¶é›†</a>
      <a href="/zhi/observation/" class="nav-button" data-tooltip="è§‚å¯Ÿ" data-messages='["æˆ‘ä»¥å¤–çš„ä¸–ç•Œåœ¨å¡‘é€ æˆ‘ã€‚", "æ ¼ç‰©è‡´çŸ¥ã€‚", "è¿™æ˜¯æˆ‘æƒ³åˆ†äº«ç»™ä½ çš„ä¸–ç•Œåˆ‡ç‰‡ã€‚"]'>è§‚å¯Ÿ</a>
      <a href="/zhi/writing/" class="nav-button" data-tooltip="å†™ä½œ" data-messages='["ç”¨æ–‡å­—å°†æ€è€ƒå’Œæ—¶é—´å‚¨å­˜æˆæ„ä¹‰ã€‚", "æˆ‘åœ¨ç°åœ¨ä¹¦å†™è¿‡å»å’Œæœªæ¥", "å†™ä¸‹æ¥å°±æ˜¯æœ€å°å•å…ƒçš„åˆ›é€ ã€‚"]'>å†™ä½œ</a>
      <a href="/zhi/reading/" class="nav-button" data-tooltip="é˜…è¯»" data-messages='["è¿™æ˜¯æˆ‘å’Œä»–/å¥¹/å®ƒçš„å¯¹è¯ã€‚", "é˜…è¯»æ˜¯ä¸€æ¬¡å®‰é™çš„å†’é™©ã€‚", "ä¸€æœ¬ä¹¦ï¼Œå°±æ˜¯ä¸€ä¸ªå°ä¸–ç•Œã€‚"]'>é˜…è¯»</a>
    </div>
    
  </div>
</section>

<!-- Knowledge Updates Section -->
<section class="knowledge-section">
  <div class="knowledge-container">
    
    <h2 class="section-title">æ–°çŸ¥</h2>
    
    <div class="knowledge-layout">
      
      <!-- Left Container (30%) -->
      <div class="knowledge-left">
        <div class="article-titles">
          <ul class="article-list">
            <!-- åŠ¨æ€ç”Ÿæˆçš„æ–‡ç« åˆ—è¡¨ -->
          </ul>
        </div>
      </div>
      
      <!-- Right Container (70%) -->
      <div class="knowledge-right">
        <div class="cover-gallery">
          <!-- åŠ¨æ€ç”Ÿæˆçš„å°é¢ç”»å»Š -->
        </div>
      </div>
      
    </div>
    
  </div>
</section>

<!-- Old Knowledge and Categories Section -->
<section class="knowledge-section">
  <div class="knowledge-container">
    
    <h2 class="section-title right-align">æ—§æ—¶</h2>
    
    <div class="categories-content">
      <p class="categories-text">
        é¢†åŸŸï¼šæ‘„å½±è§‚å¯Ÿã€åŸå¸‚è§‚å¯Ÿã€è‡ªç„¶è§‚å¯Ÿã€‚ä¸“æ ï¼šå‰ç«¯å¼€å‘ã€æŠ€æœ¯åˆ†äº«ã€è®¾è®¡æ€ç»´ã€‚åˆ†ç±»ï¼šå¿ƒç†å­¦ã€æŠ€æœ¯æ–‡ç« ã€æ‘„å½±è‰ºæœ¯ã€‚æ ‡ç­¾ï¼šæ‘„å½±ã€å‰ç«¯ã€CSSã€è‰²å½©ã€è®¾è®¡ã€å¿ƒç†å­¦ã€è®¤çŸ¥ç§‘å­¦ã€è¡Œä¸ºç»æµå­¦ã€å†³ç­–ã€åŸå¸‚ã€æ„å›¾ã€é˜…è¯»ã€å­¦ä¹ ã€æ€è€ƒã€æ–¹æ³•è®ºã€å®è·µã€‚
      </p>
    </div>
    
  </div>
</section>

<!-- Featured Content Section -->
<section class="knowledge-section">
  <div class="knowledge-container">
    
    <h2 class="section-title">ç²¾é€‰</h2>
    
    <div class="featured-grid">
      
      <!-- Featured Item 1 -->
      <div class="featured-item">
        <div class="featured-image">
          <img src="/assets/images/1mOp7h_xui-400.webp" alt="è®¾è®¡æ€ç»´å®è·µ" loading="lazy">
        </div>
        <div class="featured-content">
          <div class="featured-meta">
            <span class="featured-category">è®¾è®¡æ€ç»´</span>
            <span class="featured-date">2024-01-20</span>
          </div>
          <h3 class="featured-title">ä»ç”¨æˆ·ç ”ç©¶åˆ°äº§å“è®¾è®¡çš„å®Œæ•´æµç¨‹</h3>
          <p class="featured-excerpt">
            æ·±å…¥æ¢è®¨å¦‚ä½•é€šè¿‡ç”¨æˆ·ç ”ç©¶é©±åŠ¨äº§å“è®¾è®¡ï¼Œä»éœ€æ±‚åˆ†æåˆ°åŸå‹åˆ¶ä½œï¼Œå†åˆ°ç”¨æˆ·æµ‹è¯•çš„å®Œæ•´æ–¹æ³•è®ºã€‚
            ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œåˆ†äº«åœ¨è®¾è®¡è¿‡ç¨‹ä¸­çš„æ€è€ƒå’Œå®è·µç»éªŒã€‚
          </p>
          <div class="featured-tags">
            <span class="tag">#ç”¨æˆ·ä½“éªŒ</span>
            <span class="tag">#äº§å“è®¾è®¡</span>
            <span class="tag">#æ–¹æ³•è®º</span>
          </div>
        </div>
      </div>
      
      <!-- Featured Item 2 -->
      <div class="featured-item">
        <div class="featured-image">
          <img src="/assets/images/2mOp7h_xui-400.webp" alt="å‰ç«¯æŠ€æœ¯åˆ†äº«" loading="lazy">
        </div>
        <div class="featured-content">
          <div class="featured-meta">
            <span class="featured-category">å‰ç«¯å¼€å‘</span>
            <span class="featured-date">2024-01-15</span>
          </div>
          <h3 class="featured-title">ç°ä»£CSSå¸ƒå±€æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
          <p class="featured-excerpt">
            æ¢ç´¢CSS Gridã€Flexboxç­‰ç°ä»£å¸ƒå±€æŠ€æœ¯ï¼Œåˆ†äº«åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ç»éªŒå’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚
            ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å‰ç«¯å¼€å‘æ•ˆç‡ã€‚
          </p>
          <div class="featured-tags">
            <span class="tag">#CSS</span>
            <span class="tag">#å¸ƒå±€</span>
            <span class="tag">#å‰ç«¯</span>
          </div>
        </div>
      </div>
      
      <!-- Featured Item 3 -->
      <div class="featured-item">
        <div class="featured-image">
          <img src="/assets/images/3mOp7h_xui-400.webp" alt="æ‘„å½±è‰ºæœ¯" loading="lazy">
        </div>
        <div class="featured-content">
          <div class="featured-meta">
            <span class="featured-category">æ‘„å½±è‰ºæœ¯</span>
            <span class="featured-date">2024-01-10</span>
          </div>
          <h3 class="featured-title">åŸå¸‚æ‘„å½±ï¼šæ•æ‰éƒ½å¸‚ç”Ÿæ´»çš„éŸµå¾‹</h3>
          <p class="featured-excerpt">
            é€šè¿‡é•œå¤´è®°å½•åŸå¸‚çš„å˜è¿ä¸æ´»åŠ›ï¼Œåˆ†äº«åŸå¸‚æ‘„å½±çš„æ„å›¾æŠ€å·§å’ŒåæœŸå¤„ç†å¿ƒå¾—ã€‚
            ä»è¡—å¤´æ‘„å½±åˆ°å»ºç­‘æ‘„å½±ï¼Œæ¢ç´¢ä¸åŒè§†è§’ä¸‹çš„åŸå¸‚ç¾å­¦ã€‚
          </p>
          <div class="featured-tags">
            <span class="tag">#æ‘„å½±</span>
            <span class="tag">#åŸå¸‚</span>
            <span class="tag">#è‰ºæœ¯</span>
          </div>
        </div>
      </div>
      
    </div>
    
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOMå·²åŠ è½½ï¼Œå¼€å§‹åˆå§‹åŒ–...');
  
  const buttons = document.querySelectorAll('.nav-button');
  
  buttons.forEach(button => {
    let messageIndex = 0;
    const messages = JSON.parse(button.getAttribute('data-messages'));
    
    button.addEventListener('mouseenter', function() {
      button.setAttribute('data-tooltip', messages[messageIndex]);
      messageIndex = (messageIndex + 1) % messages.length;
    });
  });
  
  console.log('å¼€å§‹æ›´æ–°æ–°çŸ¥éƒ¨åˆ†...');
  updateNewKnowledgeDisplay();
  
  console.log('å¼€å§‹æ›´æ–°æ—§æ—¶åˆ†ç±»å†…å®¹...');
  updateOldKnowledgeCategories();
});

// æ–°çš„æ•°æ®æœåŠ¡ç±»
class ArticleDataService {
  constructor() {
    this.cache = new Map();
    this.cacheTTL = 5 * 60 * 1000; // 5åˆ†é’Ÿç¼“å­˜
  }
  
  async getUpdateLog() {
    const cacheKey = 'update-log';
    const cached = this.cache.get(cacheKey);
    
    if (cached && Date.now() - cached.timestamp < this.cacheTTL) {
      console.log('ğŸ“¦ ä½¿ç”¨ç¼“å­˜æ•°æ®');
      return cached.data;
    }
    
    try {
      console.log('ğŸŒ æ­£åœ¨è·å–æ›´æ–°æ—¥å¿—...');
      const response = await fetch('/assets/data/update-log.json');
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }
      const data = await response.json();
      console.log('âœ… æ›´æ–°æ—¥å¿—è·å–æˆåŠŸ:', data.totalArticles, 'ç¯‡æ–‡ç« ');
      
      this.cache.set(cacheKey, {
        data: data,
        timestamp: Date.now()
      });
      
      return data;
    } catch (error) {
      console.error('âŒ è·å–æ›´æ–°æ—¥å¿—å¤±è´¥:', error);
      return this.getFallbackData();
    }
  }
  
  async getLatestArticles(limit = 5) {
    const logData = await this.getUpdateLog();
    return logData.articles
      .filter(article => article.status === 'published')
      .sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate))
      .slice(0, limit);
  }
  
  async getCategoriesAndTags() {
    const logData = await this.getUpdateLog();
    const publishedArticles = logData.articles.filter(a => a.status === 'published');
    
    return {
      fields: [...new Set(publishedArticles.map(a => a.field).filter(Boolean))],
      columns: [...new Set(publishedArticles.map(a => a.column).filter(Boolean))],
      categories: [...new Set(publishedArticles.map(a => a.category).filter(Boolean))],
      tags: [...new Set(publishedArticles.flatMap(a => a.tags || []))]
    };
  }
  
  getFallbackData() {
    return {
      articles: [],
      statistics: { byType: {}, byCategory: {}, byColumn: {}, byField: {} }
    };
  }
}

// ä½¿ç”¨æ–°çš„æ•°æ®æœåŠ¡
const articleService = new ArticleDataService();

async function updateNewKnowledgeDisplay() {
  try {
    const latestArticles = await articleService.getLatestArticles(5);
    console.log('æœ€æ–°çš„5ç¯‡æ–‡ç« :', latestArticles);
    updatePageDisplay(latestArticles);
  } catch (error) {
    console.error('æ›´æ–°æ–°çŸ¥éƒ¨åˆ†å¤±è´¥:', error);
  }
}

async function updateOldKnowledgeCategories() {
  try {
    const categories = await articleService.getCategoriesAndTags();
    console.log('è·å–åˆ°çš„åˆ†ç±»æ•°æ®:', categories);
    
    const fields = categories.fields;
    const columns = categories.columns;
    const categories_list = categories.categories;
    const tags = categories.tags;
    
    let content = '';
    
    if (fields.length > 0) {
      content += `é¢†åŸŸï¼š${fields.join('ã€')}ã€‚`;
    }
    
    if (columns.length > 0) {
      content += `ä¸“æ ï¼š${columns.join('ã€')}ã€‚`;
    }
    
    if (categories_list.length > 0) {
      content += `åˆ†ç±»ï¼š${categories_list.join('ã€')}ã€‚`;
    }
    
    if (tags.length > 0) {
      content += `æ ‡ç­¾ï¼š${tags.join('ã€')}ã€‚`;
    }
    
    console.log('ç”Ÿæˆçš„å†…å®¹:', content);
    
    const categoriesText = document.querySelector('.categories-text');
    console.log('æ‰¾åˆ°çš„å…ƒç´ :', categoriesText);
    
    if (categoriesText) {
      // å°†æ¯ä¸ªè¯æ¡åŒ…è£…æˆå¯ç‚¹å‡»çš„span
      const items = content.split(/[ã€‚ã€]/).filter(item => item.trim());
      const clickableItems = items.map(item => {
        const trimmedItem = item.trim();
        if (trimmedItem.includes('ä¸“æ ')) {
          return `<span class="clickable-item" data-type="writing">${trimmedItem}</span>`;
        } else if (trimmedItem.includes('åŸå¸‚è§‚å¯Ÿ') || trimmedItem.includes('è‡ªç„¶è§‚å¯Ÿ') || trimmedItem.includes('æŠ½è±¡æ‘„å½±') || trimmedItem.includes('éƒ½å¸‚æ‘„å½±') || trimmedItem.includes('ç”Ÿæ´»æ‘„å½±') || trimmedItem.includes('æ‘„å½±è§‚å¯Ÿ')) {
          return `<span class="clickable-item" data-type="observation">${trimmedItem}</span>`;
        } else if (trimmedItem.includes('å¿ƒç†å­¦') || trimmedItem.includes('å•†ä¸šç®¡ç†') || trimmedItem.includes('ç”¨æˆ·ä½“éªŒ') || trimmedItem.includes('æŠ€æœ¯ä¹¦ç±') || trimmedItem.includes('é˜…è¯»ç¬”è®°')) {
          return `<span class="clickable-item" data-type="reading">${trimmedItem}</span>`;
        } else {
          return `<span class="clickable-item" data-type="other">${trimmedItem}</span>`;
        }
      });
      
      const styledContent = clickableItems.join(' <span style="color: #ddd;">/</span> ');
      
      categoriesText.innerHTML = styledContent;
      
      // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†
      categoriesText.addEventListener('click', function(e) {
        const clickedItem = e.target.closest('.clickable-item');
        if (clickedItem) {
          const itemType = clickedItem.getAttribute('data-type');
          const itemText = clickedItem.textContent.trim();
          console.log('ç‚¹å‡»çš„è¯æ¡:', itemText, 'ç±»å‹:', itemType);
          
          // æ ¹æ®ç±»å‹å†³å®šè·³è½¬
          switch(itemType) {
            case 'observation':
              console.log('è·³è½¬åˆ°è§‚å¯Ÿé¡µé¢');
              window.location.href = '/zhi/observation/?button=observation&hover=true';
              break;
            case 'writing':
              console.log('è·³è½¬åˆ°å†™ä½œé¡µé¢');
              window.location.href = '/zhi/writing/?button=writing&hover=true';
              break;
            case 'reading':
              console.log('è·³è½¬åˆ°é˜…è¯»é¡µé¢');
              window.location.href = '/zhi/reading/?button=reading&hover=true';
              break;
            default:
              console.log('æœªåŒ¹é…åˆ°ä»»ä½•ç±»åˆ«ï¼Œè¯æ¡:', itemText);
          }
        }
      });
      
      console.log('å†…å®¹å·²æ›´æ–°');
    } else {
      console.error('æœªæ‰¾åˆ° .categories-text å…ƒç´ ');
    }
    
    console.log('åˆ†ç±»å†…å®¹:', { fields, columns, categories: categories_list, tags });
  } catch (error) {
    console.error('æ›´æ–°æ—§æ—¶åˆ†ç±»å†…å®¹æ—¶å‡ºé”™:', error);
  }
}

function updatePageDisplay(articles) {
  const leftList = document.querySelector('.knowledge-section:nth-of-type(2) .article-list');
  if (leftList) {
    leftList.innerHTML = '';
    articles.forEach(article => {
      const li = document.createElement('li');
      li.innerHTML = `<span class="article-date">${article.publishDate}</span><a href="${article.url}">${article.title}</a>`;
      leftList.appendChild(li);
    });
  }
  
  const coverGallery = document.querySelector('.knowledge-section:nth-of-type(2) .cover-gallery');
  if (coverGallery) {
    coverGallery.innerHTML = '';
    articles.forEach(article => {
      const coverItem = document.createElement('a');
      coverItem.href = article.url;
      coverItem.className = 'cover-item';
      
      let coverImage = '';
      if (article.type === 'observation') {
        coverImage = `/assets/Pics/zhi-observation/${article.slug.split('-').slice(0, -3).join('-')}-cover.jpg`;
      } else if (article.type === 'reading') {
        coverImage = `/assets/Pics/zhi-reading/${article.slug.split('-').slice(0, -3).join('-')}-cover.jpg`;
      } else if (article.type === 'writing') {
        coverImage = `/assets/images/zhi-writing/${article.slug.split('-').slice(0, -3).join('-')}-cover.jpg`;
      }
      
      coverItem.innerHTML = `
        <img src="${coverImage}" alt="${article.title}" loading="lazy">
      `;
      
      coverGallery.appendChild(coverItem);
    });
  }
}
</script>