---
layout: layouts/base.njk
title: "Reading Â· é˜…è¯»"
description: "è¯»ä¹¦å¡ç‰‡ä¸çŸ­è¯„ã€‚è®°å½•é˜…è¯»è¿‡ç¨‹ä¸­çš„æ€è€ƒå’Œæ”¶è·ï¼Œåˆ†äº«æœ‰ä»·å€¼çš„ä¹¦ç±å’Œæ–‡ç« ï¼Œå»ºç«‹ä¸ªäººçš„é˜…è¯»ä½“ç³»ã€‚"
section: "zhi"
pageName: "reading"
pageCSS: "/assets/Css/zhi.css"
---

<!-- Main Content -->
<section class="reading-main">
  
  <!-- Container1: æœç´¢å’Œåˆ†ç±»æ ‡ç­¾ (å›ºå®š) -->
  <div class="reading-container1">
    <div class="reading-search-section">
      <div class="search-box">
        <input type="text" id="readingSearch" placeholder="æœç´¢ä¹¦ç±ã€ä½œè€…æˆ–æ ‡ç­¾..." />
        <button class="search-btn">ğŸ”</button>
      </div>
    </div>
    
    <div class="reading-filters">
      <div class="filter-group">
        <h4>åˆ†ç±»</h4>
        <div class="filter-tags">
          <button class="filter-tag active" data-filter="all">å…¨éƒ¨</button>
          <button class="filter-tag" data-filter="è®¾è®¡">è®¾è®¡</button>
          <button class="filter-tag" data-filter="æŠ€æœ¯">æŠ€æœ¯</button>
          <button class="filter-tag" data-filter="å•†ä¸š">å•†ä¸š</button>
          <button class="filter-tag" data-filter="å¿ƒç†å­¦">å¿ƒç†å­¦</button>
        </div>
      </div>
      
      <div class="filter-group">
        <h4>è¯„åˆ†</h4>
        <div class="filter-tags">
          <button class="filter-tag" data-rating="5">â˜…â˜…â˜…â˜…â˜…</button>
          <button class="filter-tag" data-rating="4">â˜…â˜…â˜…â˜…â˜†</button>
          <button class="filter-tag" data-rating="3">â˜…â˜…â˜…â˜†â˜†</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Container2: ä¹¦ç±å¡ç‰‡æ¨ªå‘æ»šåŠ¨ -->
  <div class="reading-container2">
    <button class="scroll-btn scroll-left" id="scrollLeft">â†</button>
    
    <div class="books-scroll-container" id="booksScroll">
      <div class="books-scroll-track">
        {% for book in collections.reading %}
        <div class="book-card" 
             data-category="{{ book.data.category or 'æœªåˆ†ç±»' }}"
             data-rating="{{ book.data.rating or 0 }}"
             data-title="{{ book.data.title | lower }}"
             data-author="{{ book.data.author | lower }}"
             data-tags="{{ book.data.tags | join(' ') | lower }}">
          
          <div class="book-cover">
            {% if book.data.cover %}
              <img src="{{ book.data.cover }}" alt="{{ book.data.title }}">
            {% else %}
              <div class="book-placeholder">
                <span>{{ book.data.title | slice(0, 2) }}</span>
              </div>
            {% endif %}
          </div>
          
          <div class="book-info">
            <div class="book-divider-vertical"></div>
            <div class="book-content">
              <h3 class="book-title">
                <a href="{{ book.url }}">{{ book.data.title }}</a>
              </h3>
              
              <p class="book-author">{{ book.data.author or "æœªçŸ¥ä½œè€…" }}</p>
              
              <div class="book-summary">
                {{ book.data.description or "æš‚æ— ç®€ä»‹" }}
              </div>
              
              <div class="book-divider"></div>
            </div>
          </div>
        </div>
        {% endfor %}
        
        <!-- ç©ºçŠ¶æ€ -->
        {% if collections.reading | length == 0 %}
        <div class="empty-state">
          <h3>æš‚æ— è¯»ä¹¦ç¬”è®°</h3>
          <p>è¿˜æ²¡æœ‰è®°å½•ä»»ä½•è¯»ä¹¦å†…å®¹ï¼Œ<a href="/zhi/collection/">å»æ”¶é›†ä¸€äº›å¥½ä¹¦</a>å§ï¼</p>
        </div>
        {% endif %}
      </div>
    </div>
    
    <button class="scroll-btn scroll-right" id="scrollRight">â†’</button>
  </div>

</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // è·å–DOMå…ƒç´ 
  const searchInput = document.getElementById('readingSearch');
  const filterTags = document.querySelectorAll('.filter-tag');
  const bookCards = document.querySelectorAll('.book-card');
  const booksScroll = document.getElementById('booksScroll');
  const scrollLeftBtn = document.getElementById('scrollLeft');
  const scrollRightBtn = document.getElementById('scrollRight');
  
  let currentFilter = 'all';
  let currentRating = null;
  let searchKeyword = '';
  
  // æœç´¢åŠŸèƒ½
  searchInput.addEventListener('input', function() {
    searchKeyword = this.value.toLowerCase();
    filterBooks();
  });
  
  // åˆ†ç±»ç­›é€‰
  filterTags.forEach(tag => {
    tag.addEventListener('click', function() {
      // ç§»é™¤æ‰€æœ‰activeç±»
      filterTags.forEach(t => t.classList.remove('active'));
      // æ·»åŠ activeç±»åˆ°å½“å‰ç‚¹å‡»çš„æ ‡ç­¾
      this.classList.add('active');
      
      if (this.dataset.filter) {
        currentFilter = this.dataset.filter;
        currentRating = null;
      } else if (this.dataset.rating) {
        currentRating = parseInt(this.dataset.rating);
        currentFilter = 'all';
      }
      
      filterBooks();
    });
  });
  
  // ç­›é€‰ä¹¦ç±å‡½æ•°
  function filterBooks() {
    bookCards.forEach(card => {
      const category = card.dataset.category;
      const rating = parseInt(card.dataset.rating);
      const title = card.dataset.title;
      const author = card.dataset.author;
      const tags = card.dataset.tags;
      
      let showCard = true;
      
      // åˆ†ç±»ç­›é€‰
      if (currentFilter !== 'all' && category !== currentFilter) {
        showCard = false;
      }
      
      // è¯„åˆ†ç­›é€‰
      if (currentRating && rating < currentRating) {
        showCard = false;
      }
      
      // æœç´¢ç­›é€‰
      if (searchKeyword) {
        const matchesSearch = title.includes(searchKeyword) || 
                            author.includes(searchKeyword) || 
                            tags.includes(searchKeyword);
        if (!matchesSearch) {
          showCard = false;
        }
      }
      
      // æ˜¾ç¤º/éšè—å¡ç‰‡
      card.style.display = showCard ? 'block' : 'none';
    });
    
    // æ›´æ–°æ»šåŠ¨æŒ‰é’®çŠ¶æ€
    updateScrollButtons();
  }
  
  // æ¨ªå‘æ»šåŠ¨åŠŸèƒ½
  let scrollPosition = 0;
  const scrollStep = 300; // æ¯æ¬¡æ»šåŠ¨çš„è·ç¦»
  
  scrollLeftBtn.addEventListener('click', function() {
    scrollPosition = Math.max(0, scrollPosition - scrollStep);
    booksScroll.scrollTo({
      left: scrollPosition,
      behavior: 'smooth'
    });
    updateScrollButtons();
  });
  
  scrollRightBtn.addEventListener('click', function() {
    const maxScroll = booksScroll.scrollWidth - booksScroll.clientWidth;
    scrollPosition = Math.min(maxScroll, scrollPosition + scrollStep);
    booksScroll.scrollTo({
      left: scrollPosition,
      behavior: 'smooth'
    });
    updateScrollButtons();
  });
  
  // æ›´æ–°æ»šåŠ¨æŒ‰é’®çŠ¶æ€
  function updateScrollButtons() {
    const maxScroll = booksScroll.scrollWidth - booksScroll.clientWidth;
    scrollLeftBtn.style.opacity = scrollPosition > 0 ? '1' : '0.5';
    scrollRightBtn.style.opacity = scrollPosition < maxScroll ? '1' : '0.5';
  }
  
  // ç›‘å¬æ»šåŠ¨äº‹ä»¶
  booksScroll.addEventListener('scroll', function() {
    scrollPosition = this.scrollLeft;
    updateScrollButtons();
  });
  
  // åˆå§‹åŒ–
  updateScrollButtons();
});
</script>
