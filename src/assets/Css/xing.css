/* ===============================
   行 · Doing 页面专用样式 (xing.css)
   =============================== */

/* --------------------------------
   0) 页面全局
--------------------------------- */
body[data-section="xing"] main.page-wrap {
  margin-top: 0;
  padding-top: 0;
}

/* 卡片网格容器宽度限制 - 仅电脑端 */
@media (min-width: 1200px) {
  .xing-card-grid {
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* --------------------------------
   1) HERO
--------------------------------- */
:root { --hero-h: 700px; }

.xing-hero {
  position: relative;
  width: 100vw;
  margin-left: -50vw;
  left: 50%;
  background: #fff;
}
.xing-hero .inner {
  width: 100vw;
  margin: 0 auto;
  position: relative;
}
.xing-hero .slides {
  position: relative;
  width: 100%;
  height: var(--hero-h);
  overflow: hidden;
}
.xing-hero .slide { display: none; width: 100%; height: 100%; }
.xing-hero .slide.is-active { display: block; }
.xing-hero img {
  display: block;
  width: 100%; height: 100%;
  object-fit: cover;
}
.xing-hero .caption {
  position: absolute;
  left: 48px; top: 90px;
  max-width: 560px;
  color: #000;
}
.xing-hero .caption h2 { margin: 0 0 8px; font-size: 28px; line-height: 1.2; }
.xing-hero .caption p { margin: 0; opacity: .9; line-height: 1.7; }
.xing-hero .controls {
  background: #fff;
  border-top: 1px solid #ddd;
  display: flex; justify-content: center; gap: 12px;
  padding: 10px 12px;
}
.xing-hero .dot {
  width: 56px; height: 6px;
  background: #cfcfcf;
  border-radius: 4px;
  cursor: pointer;
  border: none;
}
.xing-hero .dot.is-active { background: #000; }

/* --------------------------------
   2) Intro 灰条
--------------------------------- */
.xing-intro {
  border-top: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  padding: 28px 0;
}
.xing-intro .wrap {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 16px;
}
.xing-intro h1 { margin: 0 0 8px; }
.xing-intro p { margin: 0; opacity: .9; }

/* --------------------------------
   3) 行动库标题
--------------------------------- */
.xing-title {
  margin: 32px auto 12px;
  text-align: center;
}
.xing-title h2 {
  margin: 0;
  font-size: 40px;
  line-height: 1.2;
}

/* --------------------------------
   4) 搜索框
--------------------------------- */
.xing-searchbar {
  text-align: center;
  margin: 20px auto;
}
.xing-searchbar input[type="search"] {
  appearance: none;
  border: 1px solid #000;
  background: #fff;
  color: #000;
  padding: 8px 12px;
  border-radius: 12px;
  font: inherit;
  width: 240px;
  max-width: 90%;
  text-align: center;
}
.xing-searchbar input[type="search"]:focus {
  outline: none;
  background: #f8f8f8;
}

/* --------------------------------
   5) 分类 TagBar
--------------------------------- */
.xing-filter { max-width: 1000px; margin: 0 auto; }
.xing-filter__list {
  list-style: none;
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
  padding: 0;
}
.xing-filter__btn {
  appearance: none;
  font: inherit;
  cursor: pointer;
  border: 1px solid #000;
  background: #fff;
  color: #000;
  border-radius: 6px;
  padding: 6px 12px;
}
.xing-filter__btn:hover { background: #eaeaea; }
.xing-filter__btn.is-active { background: #000; color: #fff; }

/* --------------------------------
   6) 卡片网格
--------------------------------- */
.xing-card-grid {
  list-style: none;
  margin: 20px 0;
  padding: 0;
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(4, minmax(0, 1fr));
}
@media (max-width: 1200px) { .xing-card-grid { grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 840px)  { .xing-card-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 520px)  { .xing-card-grid { grid-template-columns: 1fr; } }

/* ==========================================
   7) 卡片视觉 + 固定高度/折叠（新增整合）
   ========================================== */

/* 统一变量：卡片固定高度 & 标签行高（用于 2 行裁切） */
:root{
  --xing-card-h: 480px;     /* 想要更高/更矮可直接调这里 */
  --tags-row-h: 26px;       /* 单行标签的高度（和 .xing-card__tag 对齐） */
}

.xing-card{
  border: 1px solid #e5e5e5;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease;
  display: flex;
  flex-direction: column;

  /* 固定卡片高度 */
  height: var(--xing-card-h);
}
.xing-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,0,0,.08);
}
.xing-card__link {
  display: flex;
  flex-direction: column;
  color: inherit;
  text-decoration: none;
  height: 100%;              /* 链接节点占满卡片高度 */
}

/* —— 封面：固定 4:3.5 —— */
.xing-card__media {
  position: relative;
  width: 100%;
  aspect-ratio: 4 / 3.5;
  overflow: hidden;
}
.xing-card__media > img.xing-card__cover {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  display: block;
}

/* —— 内容体：吃掉剩余高度 —— */
.xing-card__body {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1 1 auto;
  min-height: 0;             /* 允许内部做溢出裁切 */
}

/* —— 标题：最多 2 行省略 —— */
.xing-card__title {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  line-height: 1.35;

  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* —— 简介：最多 3 行省略（行距略紧） —— */
.xing-card__summary{
  font-size: 14px;
  line-height: 1.55;         /* 原 1.65 -> 1.55 更紧凑 */
  opacity: .85;
  margin: 0;

  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* —— 标签：最多 2 行 + 渐隐遮罩；溢出时右下显示 … —— */
.xing-card__tags{
  position: relative;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;

  /* 2 行裁切：2 * 行高 + 间隙约 6px */
  max-height: calc(var(--tags-row-h) * 2 + 6px);
  overflow: hidden;

  /* 渐隐（如卡片底色不是白，请改成你的底色） */
  mask-image: linear-gradient(to bottom, #000 70%, rgba(0,0,0,0) 100%);
  -webkit-mask-image: linear-gradient(to bottom, #000 70%, rgba(0,0,0,0) 100%);
}
.xing-card__tag{
  display:inline-flex;
  align-items:center;
  height: var(--tags-row-h);   /* 和变量对齐，保证 2 行裁切准确 */
  padding: 0 6px;
  border-radius: 4px;
  background: #eee;
  font-size: 11px;
  line-height: 1;
}
.xing-card__tags.is-overflow::after{
  content:"…";
  position:absolute;
  right:0; bottom:0;
  padding-left:8px;
  /* 若卡片底色不是白，请替换 #fff */
  background: linear-gradient(90deg, rgba(255,255,255,0) 0, #fff 40%);
  font-weight:700;
}

/* —— Footer（时间 + 多分类徽章组） —— */
.xing-card__footer {
  margin-top: auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  opacity: 0.75;
}

/* 分类徽章组允许换行（多分类同时显示） */
.xing-card__cats{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

/* 分类徽章（单个） */
.badge{
  display: inline-block;
  background: #000;
  color: #fff;
  border-radius: 8px;
  padding: 4px 6px;
  font-size: 12px;
  line-height: 1;
}

/* --------------------------------
   8) 底部浮动条
--------------------------------- */
.bottom-banner {
  position: fixed; left: 0; right: 0; bottom: 0; z-index: 20;
  display: flex; justify-content: center; align-items: center;
  background: rgba(255,255,255,.92);
  backdrop-filter: saturate(1.05) blur(2px);
  border-top: 1px solid #e5e5e5;
  padding: 8px 12px;
  font-size: 14px;
}

/* --------------------------------
   9) 回到顶部按钮
--------------------------------- */
.back-top {
  position: fixed;
  right: 20px; bottom: 70px; z-index: 30;
  width: 42px; height: 42px;
  border-radius: 50%;
  border: 1px solid #000;
  background: #000; color: #fff;
  cursor: pointer;
  display: grid; place-items: center;
  font-size: 18px;
}
.back-top:hover { opacity: .9; }

